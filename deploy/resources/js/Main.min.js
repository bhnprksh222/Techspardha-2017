!function(e,t){"function"==typeof define&&define.amd?define(["jquery"],function(n){e(n,window,document,t)}):"object"==typeof module&&module.exports?module.exports=function(n,i){return i===t&&(i="undefined"!=typeof window?require("jquery"):require("jquery")(n)),e(i,window,document,t),i}:e(jQuery,window,document,t)}(function(e,t,n,i){"use strict";var o={precision:0,divisions:2,pathLengths:i,startOffsets:i,strokeDashes:i,inverse:!1,stagger:!1,staggerDelay:0,duration:1,ease:Linear.easeNone,onComplete:e.noop},a=function(t,n,a,s){var r=[];switch(t.tagName.toLowerCase()){case"path":r.push(t);break;case"svg":r=e(t).find("path").toArray(),s!==i&&(r=r.sort(s));break;default:return void console.warn("Trail() :: Element ("+t.tagName+") given is not of compatible type.")}this.paths=r,this.timeLineOptions=e.extend({},a),this.properties=e.extend({},o),this.setOptions(n)},s={sanitizeOptions:function(){var t,n=this.properties,i=this.paths,a=n.divisions,s=n.pathLengths=new Float32Array(n.pathLengths),r=0,l=n.startOffsets=new Float32Array(n.startOffsets),h=0,c=n.strokeDashes=[],u=i.length,d=0;for(n.precision=parseInt(n.precision),isNaN(n.precision)&&(n.precision=o.precision),t=n.precision,n.divisions=parseInt(n.divisions),isNaN(n.divisions)&&(n.divisions=o.divisions),s.length!==u&&(s=new Uint32Array(u)),l.length!==u&&(l=new Uint32Array(u));d<u;)r=s[d],h=l[d],(isNaN(r)||0===r)&&(r=2*i[d].getTotalLength()),(isNaN(h)||0===h)&&(h=r/a),c.push((l[d]=h.toFixed(t))+" "+(s[d]=r.toFixed(t))),d++;n.pathLengths=s,n.startOffsets=l,n.duration=parseFloat(n.duration),isNaN(n.duration)&&(n.duration=o.duration),n.staggerDelay=parseFloat(n.staggerDelay),isNaN(n.staggerDelay)&&(n.staggerDelay=o.staggerDelay),e.isFunction(n.onComplete)||(n.onComplete=e.noop)}};a.prototype={setOptions:function(t){var n=this.properties;return n=e.extend(n,t),s.sanitizeOptions.apply(this),this.timeLineOptions.onComplete=n.onComplete,this.initialize()},play:function(e,t){return this.timeLine.play(e,t),this},pause:function(e,t){return this.timeLine.pause(e,t),this},resume:function(e,t){return this.timeLine.resume(e,t),this},reverse:function(e,t){return this.timeLine.reverse(e,t),this},seek:function(e,t){return this.timeLine.seek(e,t),this},initialize:function(){var e,t,n=this.properties,i=this.paths,o=n.strokeDashes,a=n.startOffsets,s=n.duration,r=n.ease,l=i.length,h=0,c=n.stagger?"0":"+=0",u=n.stagger?n.staggerDelay:0,d=this.timeLine=new TimelineMax(this.timeLineOptions);if(n.inverse)for(;h<l;)e=o[h],t=a[h],d.fromTo(i[h],s,{strokeDasharray:e,strokeDashoffset:-t},{strokeDashoffset:0,ease:r,delay:u*h},c),h++;else for(;h<l;)e=o[h],t=a[h],d.fromTo(i[h],s,{strokeDasharray:e,strokeDashoffset:t},{strokeDashoffset:0,ease:r,delay:u*h},c),h++;return this}},e.Trail=function(t){return e.extend(t,o)},e.fn.Trail=function(t,n){return this.each(function(){e.data(this,"Trail")instanceof a||e.data(this,"Trail",new a(this,t,n))})},e.fn.GetTrail=function(){var t;if(this.length>1){var n=[];return this.each(function(){t=e.data(this,"Trail"),t!==i&&t instanceof a&&n.push(t)}),e(n)}if(1===this.length&&(t=e.data(this[0],"Trail"),t!==i&&t instanceof a))return t},t.Trail=a}),function(e,t,n,i,o){"use strict";var a=function(e,t){this.x=e,this.y=t},s=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame,r=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.mozCancelAnimationFrame,l={},h={},c={APIAddress:"http://anshulmalik.me/api",WindowWidth:t.innerWidth,WindowHeight:t.innerHeight,WindowHalfWidth:t.innerWidth/2,WindowHalfHeight:t.innerHeight/2,MouseDeltaX:0,MouseDeltaY:0,MouseDeltaThreshold:.5,GalaxyContainerShowing:!0,GalaxyContainerTransiting:!1,GalaxyContainerX:0,GalaxyContainerY:0,GalaxyMovementSpeed:2,GalaxyMovementAnimationFrameID:o,EventSVGStarScale:100,EventSVGStarHalfSize:400,EventDefaultProperties:{id:0,societyID:0,title:"Event",description:"Description",delay:0},CategoryDefaultProperties:{id:0,title:"Category"},CategoryDiameter:512,CategoriesPosition:[],Categories:[]},u={UpdateViewBoxSize:function(){var e="0 0 "+c.WindowWidth+" "+c.WindowHeight;h.GalaxySVG.attr("viewBox",e),h.EventSVG.attr("viewBox",e)},UpdateEventSVGStarPosition:function(){i.set(h.EventSVGStar,{x:c.WindowWidth-c.EventSVGStarHalfSize,y:c.WindowHeight-c.EventSVGStarHalfSize,scale:c.EventSVGStarScale})},MoveGalaxyContainerBy:function(e,t){e=Math.abs(e)<c.MouseDeltaThreshold?0:e,t=Math.abs(t)<c.MouseDeltaThreshold?0:t,i.to(h.GalaxyContainer,2,{x:c.GalaxyContainerX+=e,y:c.GalaxyContainerY+=t,ease:Power4.easeOut})},GalaxyMovementAnimationLoop:function(){c.GalaxyContainerShowing&&!c.GalaxyContainerTransiting?(u.MoveGalaxyContainerBy(c.MouseDeltaX,c.MouseDeltaY),c.GalaxyMovementAnimationFrameID=s(u.GalaxyMovementAnimationLoop)):(r(c.GalaxyMovementAnimationFrameID),c.GalaxyMovementAnimationFrameID=o)},WindowOnResize:function(){c.WindowHalfWidth=(c.WindowWidth=t.innerWidth)/2,c.WindowHalfHeight=(c.WindowHeight=t.innerHeight)/2,u.UpdateViewBoxSize(),u.UpdateEventSVGStarPosition()},WindowOnMouseMove:function(e){c.MouseDeltaX=(c.WindowHalfWidth-e.pageX)/c.WindowHalfWidth*c.GalaxyMovementSpeed,c.MouseDeltaY=(c.WindowHalfHeight-e.pageY)/c.WindowHalfHeight*c.GalaxyMovementSpeed,c.GalaxyMovementAnimationFrameID===o&&(c.GalaxyMovementAnimationFrameID=s(u.GalaxyMovementAnimationLoop))},WindowOnMouseOut:function(e){var t=e.target;(!t||"svg"===t.nodeName.toLowerCase()&&"GalaxySVG"===t.id)&&(r(c.GalaxyMovementAnimationFrameID),c.GalaxyMovementAnimationFrameID=o)},$CreateEvent:function(e,t){var n=l.Event.clone();return n.find("text").html(e),i.set(n,t),n},$CreateCategory:function(e,t){var n=l.Category.clone();return n.find("text").html(e),i.set(n,t),n},EventOnClick:function(){var t=e.data(this,"Event");t.showDetails()},ShowGalaxyContainer:function(t,n){t=t||2,n=n||o,c.GalaxyContainerTransiting=!0,i.fromTo(h.GalaxyContainer,t,{display:"block",opacity:0,scale:.5,transformOrigin:"50% 50% 0"},{opacity:1,scale:1,transformOrigin:"50% 50% 0",ease:Power4.easeOut,onComplete:function(){c.GalaxyContainerTransiting=!1,c.GalaxyContainerShowing=!0,e.isFunction(n)&&n()}})},HideGalaxyContainer:function(t,n){t=t||2,n=n||o,c.GalaxyContainerTransiting=!0,i.fromTo(h.GalaxyContainer,t,{display:"block",opacity:1,scale:1,transformOrigin:"50% 50% 0"},{opacity:0,scale:.5,transformOrigin:"50% 50% 0",ease:Power4.easeOut,onComplete:function(){c.GalaxyContainerTransiting=!1,h.GalaxyContainer.css("display","none"),c.GalaxyContainerShowing=!1,e.isFunction(n)&&n()}})},ShowEventSection:function(e,t){e=e||2,t=t||o;var n=e/2;h.EventSVGStarShells.css("display","none"),i.fromTo(h.EventSection,e,{display:"block",opacity:0,top:"100vh"},{opacity:1,top:0,ease:Power4.easeOut,onComplete:function(){h.EventSVGStarShells.css("display","block")}}),i.fromTo(h.EventContentContainer,n,{opacity:0},{opacity:1,ease:Power4.easeOut,delay:n,onComplete:t}),i.staggerFromTo(h.EventContentContainerElements,n,{opacity:0,top:50},{opacity:1,top:0,ease:Power4.easeOut,delay:n},.2)},HideEventSection:function(t, n){t=t||2,n=n||o,i.fromTo(h.EventSection,t,{display:"block",opacity:1},{opacity:0,ease:Power4.easeOut,onComplete:function(){h.EventSVGStarShells.css("display","none"),h.EventSection.css("display","none"),e.isFunction(n)&&n()}})},EventCloseOnClick:function(){u.HideEventSection(),u.ShowGalaxyContainer()},ExtendResponse:function(t){return e.extend({status:{code:200,message:"SUCCESS"},data:[]},t)},Initialize:function(){e.ajax({url:c.APIAddress+"/categories",type:"GET",beforeSend:function(){},success:function(t){if(t=u.ExtendResponse(t),200===t.status.code){var n=t.data,i=n.length;e.ajax({url:c.APIAddress+"/events",type:"GET",beforeSend:function(){},success:function(e){if(e=u.ExtendResponse(e),200===e.status.code){var t,o,s,r=e.data,l=r.length,h={};for(c.CategoriesPosition=[],o=0; o<i; o++)h[n[o].Id]=[],c.CategoriesPosition.push(new a(2048*(Math.random()-.5)+c.WindowHalfWidth,2048*(Math.random()-.5)+c.WindowHalfHeight));for(var p=0; p<l; p++)t=r[p],h[t.CategoryId].push({id:t.Id,societyID:t.SocietyId,title:t.Name});for(c.Categories=[],o=0; o<i; o++)s=n[o],c.Categories.push(new d(o,{title:s.Name},h[s.Id]))}},complete:function(){}})}},complete:function(){}})}},d=function(t,n,i){this.index=t,this.properties=e.extend({},c.CategoryDefaultProperties,n),this.position=c.CategoriesPosition[t],this.events=[],this.setEvents(i),this.initialize()};d.prototype={initialize:function(){var t=this.position,n=this.$category=u.$CreateCategory(this.properties.title,{x:t.x,y:t.y}).appendTo(h.GalaxyContainer);return e.data(n.get(0),"Category",this),this.$title=n.find("text"),this.appendEvents(this.show),this},clearEvents:function(){for(var e=this.events,t=e.length,n=0;n<t;)e[n].$event.remove(),e[n]=null,n++;return this},setEvents:function(e){this.clearEvents();for(var t=this.events,n=e.length,i=0;i<n;i++)t.push(new p(this,i,e[i]));return this},appendEvents:function(t){function n(e,n){setTimeout(function(){e.appendTo(o),++l===s&&t.apply(i)},n)}e.isFunction(t)||(t=e.noop);for(var i=this,o=i.$category,a=i.events,s=a.length,r=0,l=0;r<s;)n(a[r].$event,1e3*Math.random()),r++;return this},show:function(e){var t=this;i.fromTo(t.$category,1,{opacity:0},{opacity:1,ease:Power4.easeInOut,onComplete:e?o:function(){t.showEvents()}}),i.fromTo(t.$title,1,{y:-32},{y:0,ease:Power4.easeOut})},showEvents:function(){for(var e=this.events,t=e.length,n=0;n<t;)e[n].show(),n++}};var p=function(t,n,i){this.category=t,this.index=n,this.properties=e.extend({},c.EventDefaultProperties,i),this.initialize()};p.prototype={initialize:function(){var t=this.properties,n=this.position=new a(c.CategoryDiameter*(Math.random()-.5),c.CategoryDiameter*(Math.random()-.5)),i=this.$event=u.$CreateEvent(t.title,{x:n.x,y:n.y,display:"none"});return e.data(i.get(0),"Event",this),this.$title=i.find("text"),this},show:function(){return i.fromTo(this.$event,2,{display:"block",opacity:0,scale:.5,transformOrigin:"50% 50% 0"},{opacity:1,scale:1,transformOrigin:"50% 50% 0",ease:Power4.easeInOut}),i.fromTo(this.$title,1,{opacity:0,y:-8},{opacity:1,y:0,ease:Power4.easeInOut,delay:1.5}),this},showDetails:function(){return h.EventContentTitle.text(this.properties.title),h.EventContentCategory.text(this.category.properties.title),h.EventContentDescription.text(this.properties.description),u.ShowEventSection(),u.HideGalaxyContainer(),this}},e(function(){h.GalaxySVG=e("#GalaxySVG",n),h.GalaxyContainer=e("#GalaxyContainer",h.GalaxySVG),l.Event=h.GalaxyContainer.find(".Event").clone(),h.GalaxyContainer.find(".Event").remove(),l.Category=h.GalaxyContainer.find(".Category").clone(),h.GalaxyContainer.find(".Category").remove(),h.EventSection=e("#EventSection",n),h.EventSVG=e("#EventSVG",h.EventSection),h.EventSVGStar=e(".Star",h.EventSVG),h.EventSVGStarShells=e(".Shell",h.EventSVGStar),h.EventContentContainer=e("#EventContentContainer",h.EventSection),h.EventContentContainerElements=e("> div > div",h.EventContentContainer).children(),h.EventContentTitle=e("#EventContentTitle",h.EventContentContainer),h.EventContentCategory=e("#EventContentCategory",h.EventContentContainer),h.EventContentDescription=e("#EventContentDescription",h.EventContentContainer),u.WindowOnResize(),c.GalaxyMovementAnimationFrameID=s(u.GalaxyMovementAnimationLoop),h.EventSection.css("display","none"),u.Initialize()}),e(n).on("click",".Event",u.EventOnClick).on("click","#EventClose",u.EventCloseOnClick),e(t).on("resize",u.WindowOnResize).on("mouseout",u.WindowOnMouseOut).on("mousemove",u.WindowOnMouseMove)}(jQuery,window,document,TweenMax);
